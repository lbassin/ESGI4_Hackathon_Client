<div [ngClass]="{'welcome-block':true, 'close': messages.length > 0}">

  <div class="logo">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 223.3 232.54"><defs><style>.cls-1{fill:#f60;}.cls-2{fill:#fff;}</style></defs><title>logo-djingo</title><g id="Calque_2" data-name="Calque 2"><g id="Calque_1-2" data-name="Calque 1"><path class="cls-1" d="M58.9,76.21a66.19,66.19,0,0,1,105.5,0h56.43a116.32,116.32,0,0,0-218.37,0Z"/><path class="cls-1" d="M169.35,148.81a66.22,66.22,0,0,1-115.4,0H0a116.31,116.31,0,0,0,223.3,0Z"/><path class="cls-2" d="M46.06,88.84a14.49,14.49,0,0,1,7.47,5.55,19.71,19.71,0,0,1,3.12,7.07,34.26,34.26,0,0,1,.83,7.25A29.06,29.06,0,0,1,54,123.5q-4.76,8.17-14.68,8.17H20.41V87.89H39.29A22.82,22.82,0,0,1,46.06,88.84ZM29.29,95.49v28.58h8.45q6.48,0,9-6.39a22.32,22.32,0,0,0,1.4-8.35q0-6.67-2.1-10.26c-1.39-2.39-4.18-3.58-8.34-3.58Z"/><path class="cls-2" d="M60,137.88l1,.08h.53a2.64,2.64,0,0,0,1.89-.61,3.28,3.28,0,0,0,.64-2.36V99.44h8.46v35.71c0,3.27-.64,5.68-1.93,7.25s-3.81,2.34-7.57,2.34l-1.15,0L60,144.65ZM72.51,95.43H64.05V87.62h8.46Z"/><path class="cls-2" d="M89.27,95.43H80.68V87.62h8.59Zm-8.59,3.86h8.59v32.38H80.68Z"/><path class="cls-2" d="M123.57,101.15q3.18,2.63,3.18,8.72v21.8h-8.67V112a9,9,0,0,0-.68-3.92c-.82-1.67-2.4-2.5-4.72-2.5a5.84,5.84,0,0,0-5.86,3.66,12.6,12.6,0,0,0-.83,4.93v17.52H97.52V99.35h8.2v4.73a14.27,14.27,0,0,1,3.08-3.6,10.61,10.61,0,0,1,6.59-2A12.4,12.4,0,0,1,123.57,101.15Z"/><path class="cls-2" d="M150.64,99.26a10.22,10.22,0,0,1,5,4.7V99.29h8.26V130c0,4.18-.71,7.33-2.11,9.45q-3.63,5.46-13.9,5.46a19,19,0,0,1-10.13-2.43,9,9,0,0,1-4.34-7.28h9.21a3.82,3.82,0,0,0,1.16,2.14c.91.77,2.44,1.16,4.6,1.16q4.58,0,6.12-3.06,1-2,1-6.6v-2.08a10.22,10.22,0,0,1-2.61,3.12,10.53,10.53,0,0,1-6.57,1.93,12.44,12.44,0,0,1-10-4.38q-3.72-4.38-3.72-11.87a20,20,0,0,1,3.59-12.13,11.84,11.84,0,0,1,10.17-4.92A11.2,11.2,0,0,1,150.64,99.26Zm2.89,23.22q2-2.25,2-7.14,0-4.61-1.94-7a6.32,6.32,0,0,0-5.19-2.4,6.1,6.1,0,0,0-6.12,4.19,14.88,14.88,0,0,0-.89,5.49,12.42,12.42,0,0,0,.95,5,6.15,6.15,0,0,0,6.15,4.1A6.52,6.52,0,0,0,153.53,122.48Z"/><path class="cls-2" d="M198.79,127.71q-4.09,5.07-12.44,5.06t-12.45-5.06a20.08,20.08,0,0,1,0-24.32q4.09-5.13,12.45-5.14t12.44,5.14a20.08,20.08,0,0,1,0,24.32ZM192,123q2-2.64,2-7.5c0-3.25-.66-5.74-2-7.49a7.51,7.51,0,0,0-11.42,0c-1.34,1.75-2,4.24-2,7.49s.67,5.74,2,7.5A7.5,7.5,0,0,0,192,123Z"/></g></g></svg>
  </div>
  <h2 ngClass="welcome-title">Que recherchez-vous ?</h2>
  <p ngClass="welcome-subtitle">Hello, {{ user }}</p>
  <button class="help-button" (click)="displayHelp()">Besoin d'aide ?</button>
</div>

<div ngClass="messages-block">
  <div (@slideIn.start)="messagesBlockEventStart($event)" (@slideIn.done)="messagesBlockEventEnd($event)" [@fadeIn]="''" [@slideIn]="''" *ngFor="let message of messages" [ngStyle]="{'position':'relative', 'overflow': 'hidden'}">
    <div *ngIf="message.sendBy == 'user'" [ngClass]="{'bubble':true, 'sended':message.sendBy == 'user' }">
      <p>{{message.textMessage}}</p>
    </div>

    <div *ngIf="message.sendBy == 'bot' && message.type == 'message'" [ngClass]="{'bubble':true, 'received':message.sendBy == 'bot' }">
      <p>{{message.textMessage}}</p>
    </div>

    <div *ngIf="message.sendBy == 'bot' && message.type === 'film-cards'"  ngClass="cards-slider-container">
      <div ngClass="cards-slider uk-position-relative uk-visible-toggle uk-light" uk-slider="finite: true">
       <ul  ngClass="uk-slider-items">
         <li ngClass="card small" *ngFor="let card of message.cards">
            <div ngClass="uk-card uk-card-default">
              <div class="cover">
                <img src="{{card.media}}" alt="">
              </div>
              <p ngClass="title">{{card.title}}</p>
              <p ngClass="type">{{card.caption}}</p>
            </div>
         </li>
       </ul>
      </div>
    </div>

    <div *ngIf="message.sendBy == 'bot' && message.type === 'help-cards'"  ngClass="cards-slider-container">
      <div ngClass="cards-slider uk-position-relative uk-visible-toggle uk-light" uk-slider="finite: true">
        <ul  ngClass="uk-slider-items">
          <li ngClass="card large" *ngFor="let help of message.helps">
            <div ngClass="uk-card uk-card-default help-card">
              <p ngClass="help-card-title">{{help.title}}</p>
              <p ngClass="help-card-desc">{{help.desc}}</p>
              <button ngClass="help-card-button">{{help.button}}</button>
            </div>
          </li>
        </ul>
      </div>
    </div>

    <div *ngIf="message.sendBy == 'bot' && message.type === 'video-card'">
      <div class="video">
        <iframe [src]="message.video.media"
                frameborder="0"
                allowfullscreen
                width="250"
                [style.height.px]="iframeHeight"
                (resize)="resizeIframe($event)"
        ></iframe>
      </div>
    </div>
    </div>
</div>

